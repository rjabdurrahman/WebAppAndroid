<div id="userDetails">
    <ul class="w3-ul w3-border-bottom" style="width:100%">
        <li style="position: relative;">
            <span class="w3-large">{{user.name}}</span>
            <br>
            <span>{{user.phone}}</span>
            <br>
            <span>{{user.address}}</span>
            <br>
            <span class="w3-container w3-round-xlarge w3-green" style="position: absolute; right : 10px; top: 4px;">+ {{debit}}</span>
            <span class="w3-container w3-round-xlarge w3-red" style="position: absolute; right: 10px; top: 28px;">â€“ {{credit}}</span>
            <span class="w3-container w3-round-xlarge w3-light-gray w3-border" style="position: absolute; right: 10px; top: 55px;">{{debit - credit}}</span>
        </li>
    </ul>
    <div class="w3-bar w3-white w3-border-bottom">
        <a id="deleteUserBtn" class="w3-bar-item w3-button w3-border-left" style="float: right;">
            <i class="w3-large fa fa-trash"></i>
        </a>
        <a href="#" class="w3-bar-item w3-button w3-border-left" style="float: right;">
            <i class="w3-large fa fa-edit"></i>
        </a>
    </div>
    <div class="w3-container w3-border-bottom w3-light-grey w3-border-green">
        <p style="float: left;">Transactions</p>
        <select style="float: right;margin-top: 1em;margin-bottom: 1em;" name="option">
            <option value="" disabled selected>YY</option>
            <option value="0">All</option>
            <option value="1">2018</option>
            <option value="2">2019</option>
            <option value="3">2020</option>
        </select>
        <select style="float: right;margin-top: 1em;margin-bottom: 1em;" name="option">
            <option value="" disabled selected>MM</option>
            <option value="0">All</option>
            <option value="01">Jan</option>
            <option value="02">Febr</option>
            <option value="03">Mar</option>
            <option value="04">Apr</option>
            <option value="05">May</option>
            <option value="06">Jun</option>
            <option value="07">Jul</option>
            <option value="08">Aug</option>
            <option value="09">Sep</option>
            <option value="10">Oct</option>
            <option value="11">Nov</option>
            <option value="12">Dec</option>
        </select>
        <select style="float: right;margin-top: 1em;margin-bottom: 1em;" name="option">
            <option value="" disabled selected>DD</option>
            <option value="0">All</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
            <option value="24">24</option>
            <option value="25">25</option>
            <option value="26">26</option>
            <option value="27">27</option>
            <option value="28">28</option>
            <option value="29">29</option>
            <option value="30">30</option>
            <option value="31">31</option>
        </select>
    </div>
    <ul class="w3-ul" style="width:100%" ng-repeat="trnu in utrans track by $index">
        <li class="w3-border-bottom w3-leftbar w3-hoverable w3-border-{{trancol(trnu.type)}}" style="position: relative;">
            <span class="w3-small">
                <i style="color: green" class="w3-small fa fa-calendar"></i> {{dateForm(trnu.date)}}</span>
            <br>
            <span>
                <i style="color: green" class="w3-medium fa fa-usd"></i>
                <span style="color: {{trancol(trnu.type)}}"> {{transym(trnu.type)}}{{trnu.amount}}</span> ({{trnu.note}})</span>
            <br>
            <span class="w3-container w3-round-xlarge w3-green" style="position: absolute; right : 10px; top: 8px;">Paid</span>
        </li>
    </ul>
    <div id="deleteAlt" class="centerEl w3-white" style="padding-bottom: 10px; display: none;">
        <div class="w3-container w3-border-bottom w3-light-grey w3-border-green">
            <p>Delete?</p>
        </div>
        <a id="crosIcon" style="position: absolute; top: 0px; right: 0px; border-left: 1px solid gray; border-bottom: 1px solid gray; padding: 5px 8px 5px 8px; cursor: pointer;">
            <i class="w3-large fa fa-times"></i>
        </a>
        <div class="w3-container">
            <p>All transactions of this user will be deleted by deleting this user.</p>
        </div>
        <a href="#allContacts" id="deleteUserCon" class="w3-round-xlarge w3-green w3-button noout" style="position: relative; left : 40px; padding: 6px 20px 6px 20px">Delete</a>
        <a id="ignorBtn" class="w3-round-xlarge w3-green w3-button noout" style="position: relative; left : 60px; padding: 6px 20px 6px 20px">Ignore</a>
    </div>
    <script>
        function closeDelConDia(){
            $js("deleteAlt").style.display = "none";
        }
        $js("deleteUserBtn").addEventListener('click', function () {
            $js("deleteAlt").style.display = "block";
            $js("ignorBtn").addEventListener('click', closeDelConDia);
            $js("crosIcon").addEventListener('click', closeDelConDia);
            $js("deleteUserCon").addEventListener('click', function () {
                var user = findUser(data.contacts, getQueryVariable("uid"));
                data.contacts.splice(data.contacts.indexOf(user), 1);
                var transc = findTrans(tranList.transactions, user.id);
                transc.forEach(function (x) {
                    tranList.transactions.splice(tranList.transactions.indexOf(x), 1);
                });
                $lsSetJ("contactList", data);
                $lsSetJ("tranList", tranList);
            });
        });
    </script>